---
title: "[C++] set, multiset í´ë˜ìŠ¤ ì •ë¦¬"
excerpt: "set? / set ìƒì„±ìì™€ ì´ˆê¸°í™”/ setì˜ í•¨ìˆ˜ë“¤ ê·¸ë¦¬ê³  multiset? / multiset ìƒì„±ìì™€ ì´ˆê¸°í™”/ multisetì˜ í•¨ìˆ˜ë“¤"

categories:
  - C/C++
tags:
  - [C++, STL]

permalink: /cpp-stl/basics-of-set-multiset-class/

toc: true
toc_sticky: true
 
date: 2020-06-24
last_modified_at: 2021-10-09
---

## ğŸ¦¥ set?

### 1) Associative Container

setì€ **ì—°ê´€ ì»¨í…Œì´ë„ˆ**, ì¦‰ ë¹ ë¥´ê²Œ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ë…¸ë“œ ê¸°ë°˜ ì´ì§„ íŠ¸ë¦¬ êµ¬ì¡°ì´ë‹¤. 

### 2) ì¤‘ë³µ í—ˆìš© ì•ˆí•¨ (unique)

setì€ **ì›ì†Œë¥¼ ê°’ìœ¼ë¡œ ì‹ë³„í•˜ê¸° ë•Œë¬¸ì— (keyê°€ value) ëª¨ë“  ê°’ì€ ìœ ì¼í•´ì•¼ í•œë‹¤**. ë˜í•œ ê°’ì˜ ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ìˆ˜ì •ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” ê°’ì„ ì‚­ì œí•˜ê³  ìƒˆë¡œìš´ ì›ì†Œë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.

### 3) ì‚½ì…ê³¼ ë™ì‹œì— ì •ë ¬ (always sorted)

```cpp
template < 
   class T, // set::key_type/value_type
   class Compare = less<T>, // set::key_compare/value_compare
   class Alloc = allocator<T>, // set::allocator_type
> class set;
```

ìœ„ì˜ Compare í•„ë“œì— ì •ì˜ë˜ëŠ” í•¨ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•œë‹¤. ê·¸ë˜ì„œ <mark>ë°ì´í„°ê°€ ë§ê³  ê²€ìƒ‰ì„ ìì£¼í•˜ëŠ” ê²½ìš°</mark> setì„ ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤. ê·¸ë¦¬ê³  ì •ë ¬ëœ êµ¬ì¡°ì´ê¸° ë•Œë¬¸ì— <mark>ê²€ìƒ‰, ì‚½ì…, ì‚­ì œê°€ ë¹ ë¥´ë‹¤(ëª¨ë‘ O(logn))</mark>. Compare í´ë˜ìŠ¤ defaultëŠ” less<T>ì´ê¸° ë•Œë¬¸ì— compare í•¨ìˆ˜ ì—†ì´ ì„ ì–¸í•œë‹¤ë©´ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•œë‹¤. 

#### â–¶ ì°¸ê³ . Red-Black Tree (ìê°€ ê· í˜• ì´ì§„ íƒìƒ‰ íŠ¸ë¦¬)?

setì€ Red-Black Tree(ìê°€ ê· í˜• ì´ì§„ íƒìƒ‰ íŠ¸ë¦¬)ë¡œ êµ¬í˜„í•œë‹¤. Red-Black TreeëŠ” Binary Search Tree ì¤‘ self-balancing(ìê°€ ê· í˜•) íŠ¹ì„±ì„ ê°–ëŠ”ë‹¤. ì´ êµ¬ì¡°ëŠ” ì‚½ì…ê³¼ ì‚­ì œê°€ ì¼ì–´ë‚˜ëŠ” ê²½ìš°ì— ìë™ìœ¼ë¡œ ê·¸ ë†’ì´(ë£¨íŠ¸ì—ì„œë¶€í„° ë‚´ë ¤ê°ˆ ìˆ˜ ìˆëŠ” ìµœëŒ€ ë ˆë²¨)ë¥¼ ì‘ê²Œ ìœ ì§€í•˜ëŠ” ë…¸ë“œ ê¸°ë°˜ ì´ì§„ íƒìƒ‰ íŠ¸ë¦¬ì´ë‹¤. ì´ì§„ íƒìƒ‰ íŠ¸ë¦¬ê°€ ê· í˜•ì´ ì¡íˆë©´ ëª¨ë“  ì‘ì—…ì„ O(log n) ì•ˆì— ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤.
- ëª¨ë“  ë…¸ë“œì—ì„œ ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ ìì‹ì˜ ë†’ì´ ì°¨ëŠ” ìµœëŒ€ +/- 1
- ìƒˆë¡œìš´ elementê°€ ë“¤ì–´ì™”ì„ ë•Œ íŠ¸ë¦¬ ì¡°ì •ì„ í†µí•´ì„œ ì ì ˆí•˜ê²Œ ìœ„ì¹˜ë¥¼ ì„¤ì •

---

## ğŸ¦¥ setì˜ ìƒì„±ìì™€ ì´ˆê¸°í™”

**set í—¤ë” ì¶”ê°€**

```cpp
#include <set>
```

**1) ë¹„ì–´ìˆëŠ” set s ìƒì„±**

```cpp
set<int> s;
```

**2) ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ set ìƒì„±**
defaultëŠ” ì˜¤ë¦„ì°¨ìˆœ(less), `greater<int>`ëŠ” ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬

```cpp
// ì•„ë˜ ì‹ì—ì„œ greater<int> ìë¦¬ì— ì„ ì–¸í•œ í•¨ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
 set<int, greater<int>> s; 
```

**3) ë³µì‚¬ë³¸ì„ ì›ì†Œë¡œ í•˜ëŠ” ì»¨í…Œì´ë„ˆ ìƒì„±**

```cpp
set<int> s(s2);
set <int> s2(s1.begin(), s1.end());
```

---

## ğŸ¦¥ setì˜ í•¨ìˆ˜ë“¤

### ğŸŒ´ Iterator

**Iteratorë¥¼ í™œìš©í•˜ì—¬ setì˜ ì›ì†Œì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤**

- `s.begin()` : setì˜ ì²«ë²ˆì§¸ ì›ì†Œë¥¼ ê°€ë¦¬í‚¤ëŠ” iterator ë¦¬í„´
- `s.end()` : setì˜ ë§ˆì§€ë§‰ ì›ì†Œ ë‹¤ìŒì„ ê°€ë¦¬í‚¤ëŠ” iterator ë¦¬í„´ (ë§ˆì§€ë§‰ ì›ì†Œ ì•„ë‹˜!!)

```cpp
/* setì˜ ëª¨ë“  ì›ì†Œ ì¶œë ¥ */
for (auto i = s.begin(); i != s.end(); i++) {
	cout << *i << endl;
}
```

<br>

### ğŸŒ´ Fuction

**set ì»¨í…Œì´ë„ˆì˜ ë©¤ë²„ í•¨ìˆ˜ë“¤**

1) set í¬ê¸° ê´€ë ¨
- `s.size()` : setì˜ element ê°œìˆ˜ ë¦¬í„´
- `s.empty()`: setì´ ë¹„ì–´ìˆëŠ”ì§€ ì—¬ë¶€ ë¦¬í„´

2) ì›ì†Œ íƒìƒ‰ ê´€ë ¨
- `s.lower_bound(k)`: kì˜ iteratorë¥¼ ë¦¬í„´
- `s.upper_bound(k)`: ì •ë ¬ëœ ìˆœì„œë¥¼ ê¸°ì¤€ìœ¼ë¡œ k ë‹¤ìŒ ì›ì†Œì˜ iteratorë¥¼ ë¦¬í„´ 
- `s.find(k)`: kë¥¼ ê°€ë¦¬í‚¤ëŠ” iterator ë¦¬í„´, kê°€ ì—†ìœ¼ë©´ end()ì™€ ê°™ì€ iterator ë¦¬í„´

3) ì›ì†Œ ì‚­ì œ
- `s.erase(it)` : iteratorê°€ ê°€ë¦¬í‚¤ëŠ” ì›ì†Œ ì‚­ì œ
- `s.erase(it1, it2)` : [it1, it2) rangeì˜ ì›ì†Œ ì‚­ì œ
- `s.clear()` : setì˜ ëª¨ë“  ì›ì†Œ ì‚­ì œ

4) ì›ì†Œ ì‚½ì…
- `s.insert(k)` : ì›ì†Œ kë¥¼ ì •ë ¬ëœ ìœ„ì¹˜ì— ì‚½ì…. ë¦¬í„´ ê°’ìœ¼ë¡œ pair(ì›ì†Œì™€ ì„±ê³µ ì—¬ë¶€) ì¶œë ¥

<br>

#### â–¶ setì˜ insert í•¨ìˆ˜ ì¶”ê°€ ì„¤ëª…

- insert í•¨ìˆ˜ì˜ return ê°’ ìë£Œí˜•ì€ <iterator, bool> pair
ret.firstëŠ” ì‚½ì…í•œ ìœ„ì¹˜ì— ëŒ€í•œ iterator ë¦¬í„´, ret secondëŠ” ì„±ê³µ ì—¬ë¶€ë¥¼ ë¦¬í„´í•œë‹¤.
```cpp
/* insert í•¨ìˆ˜ ì •ì˜*/
pair<iterator,bool> insert (const pair<const Key, Type>& val);
/* ì‹¤ìŠµ ì½”ë“œ */
pair<set<int>::iterator, bool> ret = s2.insert(10);
if (ret.second)
 cout << "success" << endl;
else
 cout << "fail" << endl;
```

- iteratorê°€ ê°€ë¦¬í‚¤ëŠ” ìœ„ì¹˜ë¶€í„° íƒìƒ‰í•˜ì—¬ kë¥¼ ì‚½ì…. ì˜ í™œìš©í•˜ë©´ ì›ì†Œë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚½ì…í•  ìˆ˜ ìˆë‹¤.
```cpp
set<int> s;
it = s.find(30);
s.insert(it, 40);
```

---

## ì‹¤ìŠµ ì½”ë“œ
  
```cpp
#include <iostream>
#include <set>
#include <iterator>

using namespace std;

int main(void) {
    set <int, greater<int>> s;
    set <int> s2;

    int list[] = { 10, 30, 50, 80, 40, 20 };
    s2.insert(list, list+6);

    s.insert(2);
    s.insert(1);
    s.insert(5);
    s.insert(9);
    s.insert(3);
    s.insert(4);
    auto ret = s.insert(8);
    s.insert(5);

    cout << "ret.first(return element) : " << *ret.first << endl;
    cout << "ret.second(return true/false) : " << ret.second << endl;

    cout << "show all elements in s" << endl;
    for (auto i = s.begin(); i != s.end(); i++) {
        cout << *i << " ";
    }
    cout << endl;

    cout << "show all elements in s2" << endl;
    for (auto i = s2.begin(); i != s2.end(); i++) {
        cout << *i << " ";
    }
    cout << endl;

    cout << "\nrun s.erase(9)" << endl;
    int ret2 = s.erase(9);
    cout << ret2 << "ê°œì˜ ì›ì†Œ erased!" << endl;

    for (auto i = s.begin(); i != s.end(); i++) {
        cout << *i << " ";
    }
    cout << endl << endl;

    cout << "lower_bound(5) : " << *s.lower_bound(5) << endl;
    cout << "upper_bound(5) : " << *s.upper_bound(5) << endl;
    for (auto i = s.lower_bound(8); i != s.upper_bound(3); i++) {
        cout << *i << " ";
    }
    cout << endl << endl;

    cout << "run s.find()" << endl;
    for (auto i = s.find(8); i != s.find(3); i++) {
        cout << *i << " ";
    }
    cout << endl << endl;

    cout << "run s.clear() if s is not empty" << endl;
    if (!s.empty()) {
        s.clear();
    }

    for (auto i = s.find(8); i != s.find(3); i++) {
        cout << *i << " ";
    }
    cout << endl;
}
```

**[ì‹¤í–‰ ê²°ê³¼]**

```bash
ret.first(return element) : 8
ret.second(return true/false) : 1
show all elements in s
9 8 5 4 3 2 1
show all elements in s2
10 20 30 40 50 80

run s.erase(9)
1ê°œì˜ ì›ì†Œ erased!
8 5 4 3 2 1

lower_bound(5) : 5
upper_bound(5) : 4
8 5 4 3

run s.find()
8 5 4

run s.clear() if s is not empty
```

---

## ğŸ¦¥ multiset?

<mark>multisetì€ setê³¼ ê±°ì˜ ë™ì¼í•˜ì§€ë§Œ, ì¤‘ë³µëœ keyê°’ì„ í—ˆìš©í•˜ëŠ” ì»¨í…Œì´ë„ˆì´ë‹¤.</mark>

## ğŸ¦¥ multisetì˜ ìƒì„±ìì™€ ì´ˆê¸°í™”

**set í—¤ë” ì¶”ê°€**

```cpp
#include <set>
```

**1) ë¹„ì–´ìˆëŠ” multiset ìƒì„±**

```cpp
multiset<int> mts;
```

**2) ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ set ìƒì„±**
defaultëŠ” ì˜¤ë¦„ì°¨ìˆœ(less), `greater<int>`ëŠ” ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬

```cpp
// ì•„ë˜ ì‹ì—ì„œ greater<int> ìë¦¬ì— ì„ ì–¸í•œ í•¨ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
 multiset<int, greater<int>> mts; 
```

**3) ë³µì‚¬ë³¸ì„ ì›ì†Œë¡œ í•˜ëŠ” set ìƒì„±**

```cpp
multiset<int> mts(mts2);
multiset<int> mts2(mts1.begin(), mts1.end());
```

---

## ğŸ¦¥ multisetì˜ í•¨ìˆ˜ë“¤

### ğŸŒ´ Iterator

setê³¼ ë™ì¼

### ğŸŒ´ Fuction

setê³¼ ê±°ì˜ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ë¶€ë¶„ë§Œ ì•„ë˜ì— ì„¤ëª…
- `s.lower_bound(k)` : ì›ì†Œ kê°€ ìˆëŠ” êµ¬ê°„ì˜ ì²˜ìŒì„ ê°€ë¦¬í‚¤ëŠ” iterator ë¦¬í„´
- `s.upper_bound(k)` : ì›ì†Œ kê°€ ìˆëŠ” êµ¬ê°„ì˜ ë(ê·¸ ë‹¤ìŒ ì›ì†Œ)ì„ ê°€ë¦¬í‚¤ëŠ” iterator ë¦¬í„´
- `s.equal_range(k)` : ì›ì†Œ kê°€ ìˆëŠ” êµ¬ê°„ì„ ë‚˜íƒ€ë‚´ëŠ” pair ê°ì²´ ë¦¬í„´. pairì˜ ì›ì†ŒëŠ” (lower_bound, upper_bound)

---

## ì‹¤ìŠµ ì½”ë“œ
  
```cpp
#include <iostream>
#include <set>
#include <iterator>

using namespace std;

int main(void) {
    multiset <int, greater<int>> mts;

    mts.insert(2);
    mts.insert(1);
    mts.insert(5);
    mts.insert(9);
    mts.insert(9);
    mts.insert(9);
    mts.insert(3);
    mts.insert(4);
    auto ret = mts.insert(8);
    mts.insert(5);
    mts.insert(5);

    cout << "insert ret : " << *ret << endl << endl;

    cout << "show all elements in mts" << endl;
    for (auto i = mts.begin(); i != mts.end(); i++) {
        cout << *i << " ";
    }
    cout << endl << endl;

    cout << "run mts.erase(9)" << endl;
    int ret2 = mts.erase(9);
    cout << ret2 << "ê°œì˜ ì›ì†Œ erased!" << endl;

    for (auto i = mts.begin(); i != mts.end(); i++) {
        cout << *i << " ";
    }
    cout << endl << endl;

    cout << "lower_bound(5) : " << *mts.lower_bound(5) << endl;
    cout << "upper_bound(5) : " << *mts.upper_bound(5) << endl;
    for (auto i = mts.lower_bound(5); i != mts.upper_bound(5); i++) {
        cout << *i << " ";
    }
    cout << endl << endl;

    cout << "run equal_pair" << endl;
    auto p = mts.equal_range(5);
    for (auto i = p.first; i != p.second; i++) {
        cout << *i << " ";
    }
}
```

**[ì‹¤í–‰ ê²°ê³¼]**

```bash
insert ret : 8

show all elements in mts
9 9 9 8 5 5 5 4 3 2 1

run mts.erase(9)
3ê°œì˜ ì›ì†Œ erased!
8 5 5 5 4 3 2 1

lower_bound(5) : 5
upper_bound(5) : 4
5 5 5

run equal_pair
5 5 5
```

**Reference**
- [https://www.geeksforgeeks.org/set-in-cpp-stl/](https://www.geeksforgeeks.org/set-in-cpp-stl/)
- [https://www.cplusplus.com/reference/set/](https://www.cplusplus.com/reference/set/)
- [https://en.cppreference.com/w/cpp/container/set](https://en.cppreference.com/w/cpp/container/set)